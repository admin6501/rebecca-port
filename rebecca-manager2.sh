=== ๐ ูุชุงุฌ ููุง ุชุญูู ฺฉุฏ ===

=== ๐ ูุชุงุฌ ุฏุณุชู 1/1 ===
ุฏุฑ ุงุฏุงูู ุชุญูู ุณุงุฎุชุงุฑุงูุชูโุง ุงุฒ ุงุณฺฉุฑูพุช `rebecca-manager2.sh` ุงุฑุงุฆู ูโุฏูู ฺฉู ุดุงูู **ุดูุงุณุง ุจุงฺฏโูุงุ ูุดฺฉูุงุช ุงููุชุ ู ูพุดููุงุฏูุง ุจูุจูุฏ** ุงุณุช:

---

## โ ูฺฉุงุช ูุซุจุช

1. **ุณุงุฎุชุงุฑ ููุธู**: ุชูุงุจุน ุจูโุฎูุจ ุชูฺฉฺฉ ุดุฏูโุงูุฏ ู ุงุณฺฉุฑูพุช ุฎูุงูุง ู ูุฑุชุจ ุงุณุช.
2. **ุงุณุชูุงุฏู ุงุฒ ุฑูฺฏโูุง**: ุจุฑุง ุงูุฒุงุด ุฎูุงูุง ุชุฑููุงู ููุงุณุจ ุงุณุช.
3. **ุงุณุชูุงุฏู ุงุฒ `confirm`**: ุจุฑุง ุงูุฌุงู ุนููุงุช ุญุณุงุณ ูุงููุฏ ูุตุจ ุง ุชุบุฑ ูพูุฑุชุ ุชุฃุฏ ฺฉุงุฑุจุฑ ุฏุฑุฎูุงุณุช ูโุดูุฏ.

---

## ๐ ุจุงฺฏโูุง ู ูุดฺฉูุงุช ุงุญุชูุงู

### 1. **ุนุฏู ุจุฑุฑุณ ูุฌูุฏ ุฏุณุชูุฑุงุช ุฎุงุฑุฌ**
ุฏุณุชูุฑุงุช ูุงููุฏ `rebecca`, `marzban`, `docker-compose`, ู `curl` ูุณุชููุงู ูุฑุงุฎูุงู ูโุดููุฏ ุจุฏูู ุจุฑุฑุณ ุงูฺฉู ุขุง ูุตุจ ูุณุชูุฏ ุง ุฎุฑ.

๐ง **ูพุดููุงุฏ**:
```bash
command -v rebecca >/dev/null 2>&1 || { echo "Rebecca command not found."; exit 1; }
```

---

### 2. **ุนุฏู ุจุฑุฑุณ ููููุช ุงุฌุฑุง ุฏุณุชูุฑุงุช**
ุฏุฑ ููุงุฑุฏ ูุงููุฏ `sed`, `rebecca update`, ุง ูุตุจ ุงุฒ GitHubุ ุจุฑุฑุณ ููโุดูุฏ ฺฉู ุขุง ุฏุณุชูุฑ ูููู ุจูุฏู ุง ูู.

๐ง **ูพุดููุงุฏ**:
```bash
if ! sed -i ...; then
  echo "Failed to change image tag"
  return 1
fi
```

---

### 3. **ุงุญุชูุงู ุฎุฑุงุจ `sed` ุฏุฑ `change_image_tag`**
ุงฺฏุฑ ุฎุท ุจุง `image: rebeccapanel/rebecca:` ุงูุช ูุดูุฏุ `sed` ุชุบุฑ ููโุฏูุฏุ ู ุจุฏูู ูพุงู ุงุฏุงูู ูโุฏูุฏ.

---

### 4. **ูุฑูุฏโูุง ุจุฏูู ุงุนุชุจุงุฑุณูุฌ**
ูุซูุงู ุฏุฑ `change_port` ููุฏุงุฑ ูุงุฑุฏุดุฏู ุจูโุตูุฑุช ูุณุชูู ูุงุฑุฏ ูุงู `.env` ูโุดูุฏ ุจุฏูู ุจุฑุฑุณ ุงูฺฉู ุนุฏุฏ ูุนุชุจุฑ ุงุณุช ุง ูพูุฑุช ูุฌุงุฒ.

๐ง **ูพุดููุงุฏ**:
```bash
[[ "$NEW_PORT" =~ ^[0-9]+$ ]] || { echo "Invalid port."; return; }
```

---

## ๐ ูุดฺฉูุงุช ุงููุช

### 1. **ุงุฌุฑุง ูุณุชูู ุงุณฺฉุฑูพุช ุงุฒ ุงูุชุฑูุช ุจุง `sudo`**
ุฏุฑ ุชูุงุจุน ูุตุจ (`install_rebecca_*`)ุ ุงุณฺฉุฑูพุชโูุง ูุงุดูุงุณ ุงุฒ GitHub ุจุง ุณุทุญ ุฏุณุชุฑุณ `sudo` ู ุจุฏูู ุจุฑุฑุณ ุงูุถุง ุฏุฌุชุงู ุงุฌุฑุง ูโุดููุฏ:

```bash
sudo bash -c "$(curl -sL ...)"
```

โ **ุงู ููุถูุน ูโุชูุงูุฏ ุจู ุงุฌุฑุง ฺฉุฏ ูุฎุฑุจ ููุฌุฑ ุดูุฏ.**

๐ **ูพุดููุงุฏ**:
- ุงุจุชุฏุง ุงุณฺฉุฑูพุช ุฑุง ุฏุงูููุฏ ฺฉุฑุฏูุ ุขู ุฑุง ุจุฑุฑุณ ู ุณูพุณ ุงุฌุฑุง ฺฉูุฏ.
- ุงุฒ `gpg` ุจุฑุง ุงูุถุง ุฏุฌุชุงู ู ุตุญุชโุณูุฌ ุงุณุชูุงุฏู ฺฉูุฏ.

---

### 2. **ุนุฏู ุงุณุชูุงุฏู ุงุฒ quotes ููุงุณุจ ุฏุฑ ูุชุบุฑูุง**
ุฏุฑ ฺูุฏ ููุฑุฏ ูุงููุฏ `rebecca $CMD` ุง `read -p ...`, ุงฺฏุฑ ูุชุบุฑ ุดุงูู ูุงุตูู ุจุงุดุฏุ ููฺฉู ุงุณุช ุจุงุนุซ ุงุฌุฑุง ูุงุฎูุงุณุชู ุดูุฏ.

๐ง **ูพุดููุงุฏ**:
```bash
rebecca "$CMD"
```

---

## ๐ก ูพุดููุงุฏูุง ุจูุจูุฏ

### 1. **ุงุณุชูุงุฏู ุงุฒ `select` ุจูโุฌุง ููู ุฏุณุช**
ุจุฑุง ููู ุชุนุงููุ ุงุณุชูุงุฏู ุงุฒ `select` ุณุงุฎุชุงุฑ ุฎูุงูุงุชุฑ ุงุฑุงุฆู ูโุฏูุฏ.

---

### 2. **ุงุถุงูู ฺฉุฑุฏู ุญุงูุช non-interactive**
ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ุงุชููุงุณูู ู ุงุณฺฉุฑูพุชโูุง CI/CDุ ุญุงูุช ุจุฏูู ูุงุฒ ุจู ุชุฃุฏ ุฏุณุช ูโุชูุงูุฏ ููุฏ ุจุงุดุฏ (ูุซูุงู ุจุง ููฺฏ `--yes`).

---

### 3. **ฺฏุฒุงุฑุด ููุง ุจูุชุฑ**
ุฏุฑ ูพุงุงู ูุฑ ุนููุงุช ุงุตูุ ุฎูุงุตู ูุถุนุช ุง ุฎุฑูุฌ ูุฑุชุจุท ููุงุด ุฏุงุฏู ุดูุฏ.

---

## ๐ ุฌูุนโุจูุฏ

| ููุน | ููุถูุน | ุดุฏุช | ูพุดููุงุฏ |
|-----|-------|------|---------|
| ุจุงฺฏ | ุจุฑุฑุณ ูุจูุฏู ุฏุณุชูุฑุงุช | ูุชูุณุท | ุงุณุชูุงุฏู ุงุฒ `command -v` |
| ุงููุช | ุงุฌุฑุง ูุณุชูู ุงุณฺฉุฑูพุช ุฎุงุฑุฌ ุจุง sudo | ุจุงูุง | ุฏุงูููุฏ ู ุจุฑุฑุณ ุฏุณุช |
| ุจูุจูุฏ | ุงุนุชุจุงุฑุณูุฌ ูุฑูุฏโูุง | ูุชูุณุท | ุจุฑุฑุณ ูพูุฑุช ู ููุฏุงุฑ tag |
| ุจูุจูุฏ | ุญุงูุช ุบุฑุชุนุงูู | ฺฉู | ุงุถุงูู ฺฉุฑุฏู ููฺฏ `--yes` |

ุงฺฏุฑ ุชูุงู ุฏุงุฑุฏ ูุณุฎู ุงููโุชุฑ ู ุจูุจูุฏุงูุชู ุงุฒ ุงู ุงุณฺฉุฑูพุช ุชููุฏ ุดูุฏุ ุฎูุดุญุงู ูโุดูู ฺฉูฺฉ ฺฉูู.